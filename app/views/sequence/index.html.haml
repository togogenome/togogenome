.main-container
  #search-methods-container
    = render 'shared/header', current: :sequence

    #methods
      .method-container#sequence-container
        .inner
          = form_tag(sequence_search_path, method: :get, class: 'form-search') do
            = search_field_tag 'fragment', params[:fragment], class: 'input-xlarge'
            = button_tag 'Search', class: 'tg-button'
          .small-note
            %p Search genomic sequences by an arbitrary sub-string of any DNA sequence fragments (e.g., "TGGAATTGTGAGCGGATAACAATT" for <i>lac</i> operator reported by <a href="http://www.ncbi.nlm.nih.gov/pubmed/4587255" target="_blank">Gilbert W and Maxam A, 1973</a>)


  #genomes.row-fluid
    - if @error
      .alert.alert-error
        = @error
    - unless @sequences.blank?
      %table.table.table-striped.table-bordered.table-hover.table-condensed
        %thead
          %tr
            %th Sequence name
            %th Locus tag
            %th Product
            %th Sequence ontology
            %th Position begin
            %th Position end
            %th Sequence
        %tbody
          - @sequences.each do |sequence|
            %tr
              %td= sequence[:name]
              %td
                - if sequence[:locus_tags].present?
                  %ul
                    - sequence[:locus_tags].each do |locus_tag|
                      %li= link_to locus_tag, gene_path("#{sequence[:taxonomy]}:#{locus_tag}"), target: '_blank'
              %td
                - if sequence[:products].present?
                  %ul
                    - sequence[:products].each do |product|
                      %li= product
              %td
                - if sequence[:sequence_ontologies].present?
                  %ul
                    - sequence[:sequence_ontologies].each do |so|
                      %li= link_to so[:name], so[:uri], target: '_blank'
              %td.numeric= number_with_delimiter(sequence[:position])
              %td.numeric= number_with_delimiter(sequence[:position_end])
              %td= match_snippet(sequence[:snippet], sequence[:snippet_pos], sequence[:position], sequence[:position_end])
